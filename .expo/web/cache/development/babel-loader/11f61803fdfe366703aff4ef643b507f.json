{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { HomeAPI } from \"../../../api/axios\";\nimport { HomeReducerActions } from \"./types\";\nexport var HomeActionCreators = {\n  setPostsRaw: function setPostsRaw(postsRaw) {\n    return {\n      type: HomeReducerActions.SET_POSTS_RAW,\n      postsRaw: postsRaw\n    };\n  },\n  setPostsValid: function setPostsValid(postsValid) {\n    return {\n      type: HomeReducerActions.SET_POSTS_VALID,\n      postsValid: postsValid\n    };\n  },\n  getPosts: function getPosts(pagePortion) {\n    return function () {\n      var _ref = _asyncToGenerator(function* (dispatch) {\n        try {\n          console.log('posts');\n          dispatch(HomeActionCreators.setIsLoading(true));\n          var posts = yield HomeAPI.getPosts(pagePortion);\n          dispatch(HomeActionCreators.setPostsRaw(posts));\n          dispatch(HomeActionCreators.setIsLoading(false));\n        } catch (e) {\n          dispatch(HomeActionCreators.setError('Posts fetching error'));\n        }\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  },\n  getUsers: function getUsers(pagePortion) {\n    return function () {\n      var _ref2 = _asyncToGenerator(function* (dispatch) {\n        try {\n          console.log('users');\n          dispatch(HomeActionCreators.setIsLoading(true));\n          var users = yield HomeAPI.getUsers(pagePortion);\n          dispatch(HomeActionCreators.setUsers(users));\n          dispatch(HomeActionCreators.setIsLoading(false));\n        } catch (e) {\n          dispatch(HomeActionCreators.setError('Users fetching error'));\n        }\n      });\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n  },\n  setError: function setError(error) {\n    return {\n      type: HomeReducerActions.SET_ERROR,\n      error: error\n    };\n  },\n  setIsLoading: function setIsLoading(isLoading) {\n    return {\n      type: HomeReducerActions.SET_IS_LOADING,\n      isLoading: isLoading\n    };\n  },\n  setUsers: function setUsers(users) {\n    return {\n      type: HomeReducerActions.SET_USERS,\n      users: users\n    };\n  },\n  getPostsValid: function getPostsValid(pagePortion) {\n    return function () {\n      var _ref3 = _asyncToGenerator(function* (dispatch) {\n        try {\n          dispatch(HomeActionCreators.setIsLoading(true));\n          var user = (yield HomeAPI.getUsers(pagePortion)).data;\n          var postsRaw = (yield HomeAPI.getPosts(user.id)).data;\n          var photos = (yield HomeAPI.getPhotos(user.id)).data;\n          var postsValid = postsRaw.map(function (item, index) {\n            return _objectSpread(_objectSpread({}, item), {}, {\n              name: user.name,\n              company: user.company.name,\n              photoURL: photos[index].thumbnailUrl\n            });\n          });\n          dispatch(HomeActionCreators.setPostsValid(postsValid.slice(0, 3)));\n          dispatch(HomeActionCreators.setIsLoading(false));\n        } catch (e) {\n          dispatch(HomeActionCreators.setError('Posts fetching error'));\n          dispatch(HomeActionCreators.setIsLoading(false));\n        }\n      });\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n  }\n};","map":{"version":3,"names":["HomeAPI","HomeReducerActions","HomeActionCreators","setPostsRaw","postsRaw","type","SET_POSTS_RAW","setPostsValid","postsValid","SET_POSTS_VALID","getPosts","pagePortion","dispatch","console","log","setIsLoading","posts","e","setError","getUsers","users","setUsers","error","SET_ERROR","isLoading","SET_IS_LOADING","SET_USERS","getPostsValid","user","data","id","photos","getPhotos","map","item","index","name","company","photoURL","thumbnailUrl","slice"],"sources":["C:/www/learning-RN/src/store/reducers/home/action-creators.js"],"sourcesContent":["import { HomeAPI } from \"../../../api/axios\";\r\nimport { HomeReducerActions } from \"./types\";\r\n\r\nexport const HomeActionCreators = {\r\n    setPostsRaw: (postsRaw) => ({\r\n        type: HomeReducerActions.SET_POSTS_RAW,\r\n        postsRaw\r\n    }),\r\n    setPostsValid: (postsValid) => ({\r\n        type: HomeReducerActions.SET_POSTS_VALID,\r\n        postsValid\r\n    }),\r\n    getPosts: (pagePortion) => async (dispatch) => {\r\n        try {\r\n            console.log('posts')\r\n            dispatch(HomeActionCreators.setIsLoading(true))\r\n            const posts = await HomeAPI.getPosts(pagePortion)\r\n            dispatch(HomeActionCreators.setPostsRaw(posts))\r\n            dispatch(HomeActionCreators.setIsLoading(false))\r\n        }\r\n\r\n        catch (e) {\r\n            dispatch(HomeActionCreators.setError('Posts fetching error'))\r\n        }\r\n    },\r\n    getUsers: (pagePortion) => async (dispatch) => {\r\n        try {\r\n            console.log('users')\r\n            dispatch(HomeActionCreators.setIsLoading(true))\r\n            const users = await HomeAPI.getUsers(pagePortion)\r\n            dispatch(HomeActionCreators.setUsers(users))\r\n            dispatch(HomeActionCreators.setIsLoading(false))\r\n        }\r\n\r\n        catch (e) {\r\n            dispatch(HomeActionCreators.setError('Users fetching error'))\r\n        }\r\n    },\r\n    setError: (error) => ({\r\n        type: HomeReducerActions.SET_ERROR,\r\n        error\r\n    }),\r\n    setIsLoading: (isLoading) => ({\r\n        type: HomeReducerActions.SET_IS_LOADING,\r\n        isLoading\r\n    }),\r\n    setUsers: (users) => ({\r\n        type: HomeReducerActions.SET_USERS,\r\n        users\r\n    }),\r\n    getPostsValid: (pagePortion) => async (dispatch) => {\r\n        try {\r\n            dispatch(HomeActionCreators.setIsLoading(true))\r\n            const user = (await HomeAPI.getUsers(pagePortion)).data\r\n            const postsRaw = (await HomeAPI.getPosts(user.id)).data\r\n            const photos = (await HomeAPI.getPhotos(user.id)).data\r\n            \r\n\r\n            const postsValid = postsRaw.map((item, index) => ({\r\n                ...item,\r\n                name: user.name,\r\n                company: user.company.name,\r\n                photoURL: photos[index].thumbnailUrl\r\n            }))\r\n\r\n            dispatch(HomeActionCreators.setPostsValid(postsValid.slice(0,3))) // заглушка для удобства демонстрации,\r\n            dispatch(HomeActionCreators.setIsLoading(false))                  // чтобы не было много постов\r\n        }\r\n\r\n        catch (e) {\r\n            dispatch(HomeActionCreators.setError('Posts fetching error'))\r\n            dispatch(HomeActionCreators.setIsLoading(false))\r\n        }\r\n    }\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}