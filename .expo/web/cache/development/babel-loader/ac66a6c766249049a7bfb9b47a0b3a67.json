{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { rules } from \"../../../utils/rules\";\nimport { HomeActionCreators } from \"../home/action-creators\";\nimport { AuthReducerActions } from \"./types\";\nexport var AuthActionCreators = {\n  setIsAuth: function setIsAuth(isAuth) {\n    return {\n      type: AuthReducerActions.SET_IS_AUTH,\n      isAuth: isAuth\n    };\n  },\n  setIsLoading: function setIsLoading(isLoading) {\n    return {\n      type: AuthReducerActions.SET_IS_LOADING,\n      isLoading: isLoading\n    };\n  },\n  setError: function setError(error) {\n    return {\n      type: AuthReducerActions.SET_ERROR,\n      error: error\n    };\n  },\n  setUser: function setUser(user) {\n    return {\n      type: AuthReducerActions.SET_USER,\n      user: user\n    };\n  },\n  signIn: function signIn(_ref) {\n    var login = _ref.login,\n        password = _ref.password;\n    return function () {\n      var _ref2 = _asyncToGenerator(function* (dispatch) {\n        try {\n          var loginMatch = login.match(rules.loginAndPassRegExp).join(' ');\n          var passwordMatch = password.match(rules.loginAndPassRegExp).join(' ');\n          dispatch(AuthActionCreators.setIsLoading(true));\n          yield new Promise(function (resolve) {\n            return setTimeout(function () {\n              if (loginMatch === 'YarL03' && passwordMatch === 'admin') {\n                dispatch(AuthActionCreators.setIsAuth(true));\n                dispatch(AuthActionCreators.setUser({\n                  login: login,\n                  password: password\n                }));\n                dispatch(AuthActionCreators.setError(''));\n              } else {\n                dispatch(AuthActionCreators.setError('Incorrect login or password'));\n              }\n\n              resolve();\n            }, 3000);\n          });\n          dispatch(AuthActionCreators.setIsLoading(false));\n        } catch (e) {\n          dispatch(AuthActionCreators.setError('Autorization error'));\n        }\n      });\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n  },\n  signOut: function signOut() {\n    return function () {\n      var _ref3 = _asyncToGenerator(function* (dispatch) {\n        try {\n          dispatch(AuthActionCreators.setIsLoading(true));\n          yield new Promise(function (resolve) {\n            return setTimeout(function () {\n              dispatch(AuthActionCreators.setIsAuth(false));\n              dispatch(AuthActionCreators.setUser(null));\n              dispatch(HomeActionCreators.setPostsValid([]));\n              resolve();\n            }, 500);\n          });\n          dispatch(AuthActionCreators.setIsLoading(false));\n        } catch (e) {\n          dispatch(AuthActionCreators.setError('Try again'));\n        }\n      });\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n  }\n};","map":{"version":3,"names":["rules","HomeActionCreators","AuthReducerActions","AuthActionCreators","setIsAuth","isAuth","type","SET_IS_AUTH","setIsLoading","isLoading","SET_IS_LOADING","setError","error","SET_ERROR","setUser","user","SET_USER","signIn","login","password","dispatch","loginMatch","match","loginAndPassRegExp","join","passwordMatch","Promise","resolve","setTimeout","e","signOut","setPostsValid"],"sources":["C:/www/learning-RN/src/store/reducers/auth/action-creators.js"],"sourcesContent":["import { rules } from \"../../../utils/rules\"\r\nimport { HomeActionCreators } from \"../home/action-creators\"\r\nimport { AuthReducerActions } from \"./types\"\r\n\r\nexport const AuthActionCreators = {\r\n    setIsAuth: (isAuth) => ({\r\n        type: AuthReducerActions.SET_IS_AUTH,\r\n        isAuth\r\n    }),\r\n    setIsLoading: (isLoading) => ({\r\n        type: AuthReducerActions.SET_IS_LOADING,\r\n        isLoading\r\n    }),\r\n    setError: (error) => ({\r\n        type: AuthReducerActions.SET_ERROR,\r\n        error\r\n    }),\r\n    setUser: (user) => ({\r\n        type: AuthReducerActions.SET_USER,\r\n        user\r\n    }),\r\n    signIn: ({login, password}) => async (dispatch) => {\r\n        try {\r\n            const loginMatch = login.match(rules.loginAndPassRegExp).join(' ')\r\n            const passwordMatch = password.match(rules.loginAndPassRegExp).join(' ')\r\n            dispatch(AuthActionCreators.setIsLoading(true))\r\n            await new Promise(resolve => setTimeout(() => {\r\n                    if (loginMatch === 'YarL03' && passwordMatch === 'admin') {\r\n                        dispatch(AuthActionCreators.setIsAuth(true))\r\n                        dispatch(AuthActionCreators.setUser({login, password}))\r\n                        dispatch(AuthActionCreators.setError(''))\r\n                    }\r\n                    else {\r\n                        dispatch(AuthActionCreators.setError('Incorrect login or password'))\r\n                    }\r\n                    resolve()\r\n                }, 3000)) // заглушка\r\n           \r\n            dispatch(AuthActionCreators.setIsLoading(false))\r\n        }\r\n        catch (e) {\r\n            dispatch(AuthActionCreators.setError('Autorization error'))\r\n        }\r\n    },\r\n    signOut: () => async (dispatch) => {\r\n        try {\r\n            dispatch(AuthActionCreators.setIsLoading(true))\r\n            await new Promise(resolve => setTimeout(() => {\r\n                    dispatch(AuthActionCreators.setIsAuth(false))\r\n                    dispatch(AuthActionCreators.setUser(null))\r\n                    dispatch(HomeActionCreators.setPostsValid([]))\r\n                    resolve()\r\n                }, 500)) // заглушка\r\n           \r\n            dispatch(AuthActionCreators.setIsLoading(false))\r\n        }\r\n\r\n        catch (e) {\r\n            dispatch(AuthActionCreators.setError('Try again'))\r\n        }\r\n    },\r\n}"],"mappings":";AAAA,SAASA,KAAT;AACA,SAASC,kBAAT;AACA,SAASC,kBAAT;AAEA,OAAO,IAAMC,kBAAkB,GAAG;EAC9BC,SAAS,EAAE,mBAACC,MAAD;IAAA,OAAa;MACpBC,IAAI,EAAEJ,kBAAkB,CAACK,WADL;MAEpBF,MAAM,EAANA;IAFoB,CAAb;EAAA,CADmB;EAK9BG,YAAY,EAAE,sBAACC,SAAD;IAAA,OAAgB;MAC1BH,IAAI,EAAEJ,kBAAkB,CAACQ,cADC;MAE1BD,SAAS,EAATA;IAF0B,CAAhB;EAAA,CALgB;EAS9BE,QAAQ,EAAE,kBAACC,KAAD;IAAA,OAAY;MAClBN,IAAI,EAAEJ,kBAAkB,CAACW,SADP;MAElBD,KAAK,EAALA;IAFkB,CAAZ;EAAA,CAToB;EAa9BE,OAAO,EAAE,iBAACC,IAAD;IAAA,OAAW;MAChBT,IAAI,EAAEJ,kBAAkB,CAACc,QADT;MAEhBD,IAAI,EAAJA;IAFgB,CAAX;EAAA,CAbqB;EAiB9BE,MAAM,EAAE;IAAA,IAAEC,KAAF,QAAEA,KAAF;IAAA,IAASC,QAAT,QAASA,QAAT;IAAA;MAAA,8BAAuB,WAAOC,QAAP,EAAoB;QAC/C,IAAI;UACA,IAAMC,UAAU,GAAGH,KAAK,CAACI,KAAN,CAAYtB,KAAK,CAACuB,kBAAlB,EAAsCC,IAAtC,CAA2C,GAA3C,CAAnB;UACA,IAAMC,aAAa,GAAGN,QAAQ,CAACG,KAAT,CAAetB,KAAK,CAACuB,kBAArB,EAAyCC,IAAzC,CAA8C,GAA9C,CAAtB;UACAJ,QAAQ,CAACjB,kBAAkB,CAACK,YAAnB,CAAgC,IAAhC,CAAD,CAAR;UACA,MAAM,IAAIkB,OAAJ,CAAY,UAAAC,OAAO;YAAA,OAAIC,UAAU,CAAC,YAAM;cACtC,IAAIP,UAAU,KAAK,QAAf,IAA2BI,aAAa,KAAK,OAAjD,EAA0D;gBACtDL,QAAQ,CAACjB,kBAAkB,CAACC,SAAnB,CAA6B,IAA7B,CAAD,CAAR;gBACAgB,QAAQ,CAACjB,kBAAkB,CAACW,OAAnB,CAA2B;kBAACI,KAAK,EAALA,KAAD;kBAAQC,QAAQ,EAARA;gBAAR,CAA3B,CAAD,CAAR;gBACAC,QAAQ,CAACjB,kBAAkB,CAACQ,QAAnB,CAA4B,EAA5B,CAAD,CAAR;cACH,CAJD,MAKK;gBACDS,QAAQ,CAACjB,kBAAkB,CAACQ,QAAnB,CAA4B,6BAA5B,CAAD,CAAR;cACH;;cACDgB,OAAO;YACV,CAVkC,EAUhC,IAVgC,CAAd;UAAA,CAAnB,CAAN;UAYAP,QAAQ,CAACjB,kBAAkB,CAACK,YAAnB,CAAgC,KAAhC,CAAD,CAAR;QACH,CAjBD,CAkBA,OAAOqB,CAAP,EAAU;UACNT,QAAQ,CAACjB,kBAAkB,CAACQ,QAAnB,CAA4B,oBAA5B,CAAD,CAAR;QACH;MACJ,CAtBO;;MAAA;QAAA;MAAA;IAAA;EAAA,CAjBsB;EAwC9BmB,OAAO,EAAE;IAAA;MAAA,8BAAM,WAAOV,QAAP,EAAoB;QAC/B,IAAI;UACAA,QAAQ,CAACjB,kBAAkB,CAACK,YAAnB,CAAgC,IAAhC,CAAD,CAAR;UACA,MAAM,IAAIkB,OAAJ,CAAY,UAAAC,OAAO;YAAA,OAAIC,UAAU,CAAC,YAAM;cACtCR,QAAQ,CAACjB,kBAAkB,CAACC,SAAnB,CAA6B,KAA7B,CAAD,CAAR;cACAgB,QAAQ,CAACjB,kBAAkB,CAACW,OAAnB,CAA2B,IAA3B,CAAD,CAAR;cACAM,QAAQ,CAACnB,kBAAkB,CAAC8B,aAAnB,CAAiC,EAAjC,CAAD,CAAR;cACAJ,OAAO;YACV,CALkC,EAKhC,GALgC,CAAd;UAAA,CAAnB,CAAN;UAOAP,QAAQ,CAACjB,kBAAkB,CAACK,YAAnB,CAAgC,KAAhC,CAAD,CAAR;QACH,CAVD,CAYA,OAAOqB,CAAP,EAAU;UACNT,QAAQ,CAACjB,kBAAkB,CAACQ,QAAnB,CAA4B,WAA5B,CAAD,CAAR;QACH;MACJ,CAhBQ;;MAAA;QAAA;MAAA;IAAA;EAAA;AAxCqB,CAA3B"},"metadata":{},"sourceType":"module"}